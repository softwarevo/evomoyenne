/* Anti-bounce */
html, body {
    overscroll-behavior-y: none;
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
    background-color: #F9F9F9;
}

:root {
    --md-sys-color-surface: #F9F9F9;
    --md-sys-color-on-surface: #1B1B1F;
    --md-sys-color-surface-container: #ECECEC;
    --md-sys-color-primary: #000000;
    --md-sys-color-on-primary: #FFFFFF;
    --md-sys-color-secondary-container: #E0E0E0;
    --md-sys-color-outline: #79747E;
    --radius-l: 28px;
}

@media (prefers-color-scheme: dark) {
    :root {
        --md-sys-color-surface: #141414;
        --md-sys-color-on-surface: #E3E3E3;
        --md-sys-color-surface-container: #2b2b2b;
        --md-sys-color-primary: #FFFFFF;
        --md-sys-color-on-primary: #000000;
        --md-sys-color-secondary-container: #3F3F3F;
    }
    body { background-color: #141414; }
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }

#app { 
    height: calc(100vh - 80px); 
    overflow-y: auto; 
    padding: 20px; 
    padding-top: env(safe-area-inset-top);
    -webkit-overflow-scrolling: touch; 
}

.page { display: none; }
.page.active { display: block; animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Cards & Components */
.card { background: var(--md-sys-color-surface-container); border-radius: var(--radius-l); padding: 20px; margin-bottom: 16px; border: none; }
.header-large { text-align: center; margin: 30px 0; }
#main-average { font-size: 64px; font-weight: 700; display: block; }
.badge { background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); padding: 4px 12px; border-radius: 20px; font-size: 12px; display: inline-block; }

/* Forms */
.m3-input, select, input[type="number"] {
    width: 100%; padding: 16px; border-radius: 12px; border: 1px solid var(--md-sys-color-outline);
    background: transparent; color: var(--md-sys-color-on-surface); font-size: 16px; margin-bottom: 10px;
}
.row-inputs { display: flex; gap: 8px; align-items: center; margin-bottom: 15px; }
.radio-group { display: flex; gap: 4px; }
.radio-chip input { display: none; }
.radio-chip span { padding: 10px 14px; border-radius: 20px; border: 1px solid var(--md-sys-color-outline); font-size: 12px; }
.radio-chip input:checked + span { background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); }

/* History */
.history-item { display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(121,116,126,0.2); }
.history-item.ghost { opacity: 0.5; font-style: italic; }

/* Navbar */
.navbar {
    position: fixed; bottom: 0; width: 100%; height: 80px;
    background: var(--md-sys-color-surface-container);
    display: flex; justify-content: space-around; align-items: center;
    padding-bottom: env(safe-area-inset-bottom);
}
.nav-item { background: none; border: none; display: flex; flex-direction: column; align-items: center; color: var(--md-sys-color-outline); }
.nav-item.active { color: var(--md-sys-color-on-surface); }
.nav-item .icon { padding: 4px 20px; border-radius: 16px; }
.nav-item.active .icon { background: var(--md-sys-color-secondary-container); font-variation-settings: 'FILL' 1; }
.nav-item .label { font-size: 12px; margin-top: 4px; font-weight: 500; }

/* Buttons */
.btn { border: none; padding: 14px 24px; border-radius: 28px; font-weight: 600; cursor: pointer; }
.btn-filled { background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); }
.btn-outlined { border: 1px solid var(--md-sys-color-outline); background: transparent; color: var(--md-sys-color-on-surface); }
.btn-tonal { background: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-surface); }
.btn-text { background: transparent; border: none; }
.full-width { width: 100%; }

/* Switch */
.switch { position: relative; width: 40px; height: 20px; }
.switch input { display: none; }
.slider { position: absolute; top:0; left:0; right:0; bottom:0; background: #ccc; border-radius: 20px; transition: 0.3s; }
.slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background: white; border-radius: 50%; transition: 0.3s; }
input:checked + .slider { background: var(--md-sys-color-primary); }
input:checked + .slider:before { transform: translateX(20px); }

/* Overlays */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: flex-end; z-index: 1000; }
.sheet-content { background: var(--md-sys-color-surface); width: 100%; padding: 20px; border-radius: 28px 28px 0 0; animation: slideUp 0.3s ease-out; }
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
.emoji-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
.emoji-opt { font-size: 24px; padding: 10px; text-align: center; background: var(--md-sys-color-surface-container); border-radius: 12px; }
.emoji-opt.selected { outline: 2px solid var(--md-sys-color-primary); }
