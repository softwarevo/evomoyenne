<!DOCTYPE html>
<html lang="fr">
<head>
	<!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S0ZY71G1SL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-S0ZY71G1SL');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#121212">
	<meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="evoMoyenne">
	<meta name="citation_title" content="evoMoyenne">
    <meta name="citation_author" content="evoSoftware">
	<meta name="keywords" content="EcoleDirecte, Moyenne EcoleDirecte, Moyenne G√©n√©rale, Moyenne scolaire, Notes EcoleDirecte, evoMoyenne, evo moyenne">
    <link rel="apple-touch-icon" href="assets/logos/logo-touch.png">
    <title>evoMoyenne - Calculateur de moyennes intelligent compatible avec EcoleDirecte</title>
    <meta name="description" content="L'outil ultime pour suivre tes notes et ta moyenne en temps r√©el. Fonctionnalit√©s intelligentes. Compatible avec EcoleDirecte.">
    <link rel="canonical" href="https://evomoyenne.qzz.io/">
    <meta property="og:url" content="https://evomoyenne.qzz.io/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="evoMoyenne - Calculateur de moyennes intelligent compatible avec EcoleDirecte">
    <meta property="og:description" content="L'outil ultime pour suivre tes notes et ta moyenne en temps r√©el. Fonctionnalit√©s intelligentes. Compatible avec EcoleDirecte.">
    <meta property="og:image" content="https://i.ibb.co/kgySgbPJ/Design-sans-titre.png">
	<meta property="og:locale" content="fr_fr">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="evomoyenne.qzz.io">
    <meta property="twitter:url" content="https://evomoyenne.qzz.io/">
    <meta name="twitter:title" content="evoMoyenne - Calculateur de moyennes intelligent compatible avec EcoleDirecte">
    <meta name="twitter:description" content="L'outil ultime pour suivre tes notes et ta moyenne en temps r√©el. Fonctionnalit√©s intelligentes. Compatible avec EcoleDirecte.">
    <meta name="twitter:image" content="https://i.ibb.co/kgySgbPJ/Design-sans-titre.png">
	<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "evoMoyenne",
      "alternateName": ["Evo Moyenne", "Moyenne EcoleDirecte"],
      "description": "Calcule ta moyenne scolaire facilement, simule des notes et synchronise ton compte EcoleDirecte. L'outil indispensable pour les √©l√®ves.",
      "url": "https://evomoyenne.qzz.io",
      "applicationCategory": "EducationApplication",
      "operatingSystem": "All",
      "keywords": "EcoleDirecte, moyenne, calcul de moyenne, notes, simulateur de moyenne, evoMoyenne",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EUR"
      },
      "featureList": [
        "Calcul de moyenne g√©n√©rale",
        "Notes fant√¥mes (simulation)",
        "Synchronisation EcoleDirecte",
        "Graphique d'√©volution",
        "Suivi des moyennes",
		"Partage de sa moyenne",
		"Bulletin fictif"
      ]
    }
    </script>

	<!-- Manifest PWA -->
    <link rel="manifest" href="manifest.webmanifest">

	<!--Font and icons-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">

	<!--CSS-->
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body data-theme="dark">
    <div class="app-container">
        <header class="top-bar">
            <h1 class="visually-hidden">evoMoyenne - Calculateur de moyennes intelligent compatible avec EcoleDirecte</h1>
            <div class="logo-container">
                <img id="logo-img" src="/assets/logos/logo-b.png" alt="evoMoyenne Logo" loading="eager" width="32" height="32">
                <span class="logo-text">evoMoyenne</span>
				<span class="version-badge" id="version-badge" style="cursor: pointer;" title="Version de l'application">v1.1</span>
            </div>
			
            <div class="top-actions">
                <div class="offline-badge" id="offline-badge" role="status" aria-live="polite">
                    <span class="material-symbols-rounded" aria-hidden="true">cloud_off</span>
                    Hors-ligne
                </div>
                <div class="profile-wrapper">
                    <button class="profile-btn" id="profile-trigger" aria-label="Menu profil" aria-haspopup="true" aria-expanded="false">
                        <div class="profile-avatar">
                            <span class="material-symbols-rounded" aria-hidden="true">person</span>
                        </div>
                        <span class="profile-name">Pr√©nom Nom</span>
                    </button>

                    <div class="login-tip hidden" id="login-tip">
                        <b>Connecte-toi</b>
                        Tu dois te connecter √† ton compte EcoleDirecte pour utiliser evoMoyenne.
                    </div>

                    <nav class="dropdown-menu" id="profile-dropdown" role="menu">
                        <button class="dropdown-item" id="menu-theme-toggle" role="menuitem">
                            <span class="material-symbols-rounded" aria-hidden="true">dark_mode</span>
                            <span id="theme-label">Mode Clair</span>
                        </button>
                        <button class="dropdown-item" id="menu-about-btn" role="menuitem">
                            <span class="material-symbols-rounded" aria-hidden="true">info</span>
                            √Ä propos
                        </button>
                        <button class="dropdown-item" id="menu-settings-btn" role="menuitem">
                            <span class="material-symbols-rounded" aria-hidden="true">settings</span>
                            Param√®tres
                        </button>
                        <div class="dropdown-divider" role="separator"></div>
                        <button class="dropdown-item item-danger" role="menuitem">
                            <span class="material-symbols-rounded" aria-hidden="true">logout</span>
                            Se d√©connecter
                        </button>
                    </nav>
                </div>
            </div>
        </header>

        <main class="pages-wrapper" id="pagesWrapper">
            <section class="page" id="page-accueil">
                <section class="card average-hero" id="average-hero">
                    <h2 class="average-label">Moyenne G√©n√©rale</h2>
                    <div class="average-value" id="average-value">--</div>
                    <div class="average-evolution" id="average-evolution">
                        <span class="material-symbols-rounded" aria-hidden="true">trending_flat</span>
                        <span id="evolution-text">Pas de donn√©es</span>
                    </div>
                </section>

                <section class="card">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded" aria-hidden="true">show_chart</span>
                        √âvolution
                    </h2>
                    <div class="chart-container">
                        <canvas id="evolution-chart"></canvas>
                    </div>
                </section>

                <section class="card target-card">
                    <div class="target-header">
                        <h2 class="section-title" style="margin-bottom: 0;">
                            <span class="material-symbols-rounded" aria-hidden="true">flag</span>
                            Objectif
                        </h2>
                        <div class="target-input-container">
                            <input type="number" class="target-input" id="target-input" min="0" max="20" step="0.01" value="20" aria-label="Objectif de moyenne">
                            <span>/20</span>
                        </div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" id="target-progress"></div>
                    </div>
                    <div class="progress-label">
                        <span id="progress-current">0.00</span>
                        <span id="progress-remaining">Il reste 20.00 pts</span>
                    </div>
                </section>

                <div class="topflop-grid">
                    <section class="card topflop-card">
                        <h3 class="topflop-title">
                            <span class="material-symbols-rounded" style="color: #4caf50;" aria-hidden="true">trending_up</span>
                            Top 3
                        </h3>
                        <ul id="top-list" style="list-style: none;"></ul>
                    </section>
                    <section class="card topflop-card">
                        <h3 class="topflop-title">
                            <span class="material-symbols-rounded" style="color: #f44336;" aria-hidden="true">trending_down</span>
                            Flop 3
                        </h3>
                        <ul id="flop-list" style="list-style: none;"></ul>
                    </section>
                </div>

                <section class="card export-section">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded" aria-hidden="true">share</span>
                        Partager
                    </h2>
                    <div class="export-buttons">
                        <button class="export-btn" id="share-card-btn" aria-label="Partager ma moyenne sous forme d'image">
                            <span class="material-symbols-rounded" aria-hidden="true">image</span>
                            Partage direct
                        </button>
                        <button class="export-btn" id="export-pdf-btn" aria-label="G√©n√©rer un bulletin fictif en PDF">
                            <span class="material-symbols-rounded" aria-hidden="true">description</span>
                            Bulletin fictif
                        </button>
                    </div>
                </section>
            </section>

            <section class="page hidden" id="page-labo">
                
                <section class="card add-note-card">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded" aria-hidden="true">add_circle</span>
                        Ajouter une note
                    </h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="note-subject">Mati√®re</label>
                            <select class="form-select" id="note-subject" aria-label="S√©lectionner la mati√®re">
                                <option value="">S√©lectionner...</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label" for="note-value">Note</label>
                            <input type="number" class="form-input" id="note-value" placeholder="15" min="0" max="20" step="0.01" aria-label="Valeur de la note">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label" for="note-max">Sur</label>
                            <input type="number" class="form-input" id="note-max" placeholder="20" min="1" max="100" value="20" aria-label="Note maximale">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label" for="note-coef">Coef</label>
                            <input type="number" class="form-input" id="note-coef" placeholder="1" min="0.1" max="20" step="0.1" value="1" aria-label="Coefficient de la note">
                        </div>
                    </div>
                    <button class="add-btn" id="add-note-btn" aria-label="Confirmer l'ajout de la note">
                        <span class="material-symbols-rounded" aria-hidden="true">add</span>
                        Ajouter la note
                    </button>
                </section>

                <header class="subjects-header">
                    <h2 class="section-title" style="margin-bottom: 0;">
                        <span class="material-symbols-rounded" aria-hidden="true">folder</span>
                        Mes mati√®res
                    </h2>
                    <button class="coef-btn" id="coef-dialog-btn" aria-label="G√©rer les coefficients des mati√®res">
                        <span class="material-symbols-rounded" aria-hidden="true">tune</span>
                        Coefficients
                    </button>
                </header>

                <div id="subjects-container"></div>
            </section>
        </main>

        <nav class="bottom-nav" aria-label="Navigation principale">
            <button class="nav-item active" data-page="accueil" aria-label="Aller √† la page Accueil">
                <div class="nav-pill">
                    <span class="material-symbols-rounded filled" aria-hidden="true">home</span>
                </div>
                <span class="nav-label">Accueil</span>
            </button>
            <button class="nav-item" data-page="labo" aria-label="Aller √† la page Labo">
                <div class="nav-pill">
                    <span class="material-symbols-rounded" aria-hidden="true">science</span>
                </div>
                <span class="nav-label">Labo</span>
            </button>
        </nav>
    </div>

    <div class="dialog-overlay" id="coef-dialog" role="dialog" aria-labelledby="coef-dialog-title" aria-modal="true">
        <div class="dialog">
            <h2 class="dialog-title" id="coef-dialog-title">Coefficients des mati√®res</h2>
            <div id="coef-list"></div>
            <footer class="dialog-actions">
                <button class="dialog-btn dialog-btn-secondary" id="close-coef-dialog">Annuler</button>
                <button class="dialog-btn dialog-btn-primary" id="save-coef-dialog">Enregistrer</button>
            </footer>
        </div>
    </div>

    <div class="dialog-overlay" id="about-dialog" role="dialog" aria-labelledby="about-dialog-title" aria-modal="true">
        <div class="dialog">
            <h2 class="dialog-title" id="about-dialog-title">√Ä propos</h2>
            <section class="dialog-content">
                <p>evoMoyenne sert √† calculer votre moyenne g√©n√©rale (et plus) depuis vos notes EcoleDirecte.</p>
				<p>Nous utilisons notre propre bridge, <a href="https://github.com/softwarevo/evo2ed" target="_blank" rel="noopener noreferrer" title="Consulter le d√©p√¥t GitHub de evo2ED">evo2ED</a>, bas√© sur la librairie <a href="https://github.com/louislegrain/api-ecoledirecte" target="_blank" rel="noopener noreferrer" title="Consulter le d√©p√¥t GitHub de api-ecoledirecte">api-ecoledirecte</a>, pour la connexion √† EcoleDirecte.</p>
				<p><strong>TOUT le contenu d'evoMoyenne</strong> est open-source, du site lui-m√™me au bridge.</p>
                <p style="margin-top: 16px; font-size: 13px; color: var(--md-sys-color-on-surface-variant);">Version 1.1</p>
            </section>
            <footer class="dialog-actions">
                <button class="dialog-btn dialog-btn-primary" id="close-about-dialog">Fermer</button>
            </footer>
        </div>
    </div>

    <div class="dialog-overlay" id="settings-dialog" role="dialog" aria-labelledby="settings-dialog-title" aria-modal="true">
        <div class="dialog">
            <h2 class="dialog-title" id="settings-dialog-title">Param√®tres</h2>
            <section class="dialog-content">
                <div class="ghost-toggle" id="dont-save-toggle" style="padding: 12px 0; cursor: pointer;" role="button" aria-pressed="false" aria-label="Ne pas enregistrer de donn√©es localement">
                    <div class="checkbox-m3" id="dont-save-checkbox">
                        <span class="material-symbols-rounded filled" aria-hidden="true">check</span>
                    </div>
                    <span class="ghost-toggle-label" style="cursor: pointer;">Ne pas enregistrer de donn√©es localement</span>
                </div>
                <p style="font-size: 12px; color: var(--md-sys-color-on-surface-variant); margin-top: 8px;">
                    Si cette option est activ√©e, aucune donn√©e ne sera sauvegard√©e dans votre navigateur. Tout sera perdu √† la fermeture de l'onglet.
                </p>
            </section>
            <footer class="dialog-actions">
                <button class="dialog-btn dialog-btn-primary" id="close-settings-dialog">Fermer</button>
            </footer>
        </div>
    </div>

    <div class="dialog-overlay" id="share-dialog" role="dialog" aria-labelledby="share-dialog-title" aria-modal="true">
        <div class="dialog" style="max-width: 360px;">
            <h2 class="dialog-title" id="share-dialog-title">Cr√©er ta carte de partage</h2>
            <section class="share-card-container" id="share-form">
                <div class="share-input-group">
                    <label class="visually-hidden" for="share-name">Ton pr√©nom</label>
                    <input type="text" class="share-input" id="share-name" placeholder="Ton pr√©nom" maxlength="20">
                </div>
                <p style="font-size: 13px; color: var(--md-sys-color-on-surface-variant); margin-bottom: 8px;">Choisis un emoji</p>
                <div class="emoji-picker" id="emoji-picker"></div>
            </section>
            <div id="share-preview" style="display: none;"></div>
            <footer class="dialog-actions">
                <button class="dialog-btn dialog-btn-secondary" id="close-share-dialog">Fermer</button>
                <button class="dialog-btn dialog-btn-primary" id="generate-share-card">G√©n√©rer</button>
            </footer>
        </div>
    </div>

    <div class="dialog-overlay" id="edit-dialog" role="dialog" aria-labelledby="edit-dialog-title" aria-modal="true">
        <div class="dialog">
            <h2 class="dialog-title" id="edit-dialog-title">Modifier la note</h2>
            <div class="form-row" style="flex-direction: column; gap: 16px;">
                <div class="form-group">
                    <label class="form-label" for="edit-note-value">Note</label>
                    <input type="number" class="form-input" id="edit-note-value" min="0" max="20" step="0.01" aria-label="Modifier la valeur de la note">
                </div>
                <div class="form-group">
                    <label class="form-label" for="edit-note-max">Sur</label>
                    <input type="number" class="form-input" id="edit-note-max" min="1" max="100" aria-label="Modifier la note maximale">
                </div>
                <div class="form-group">
                    <label class="form-label" for="edit-note-coef">Coefficient</label>
                    <input type="number" class="form-input" id="edit-note-coef" min="0.1" max="20" step="0.1" aria-label="Modifier le coefficient">
                </div>
                <div class="ghost-toggle" style="padding: 0; display: none;" role="button" aria-pressed="false" aria-label="Note fant√¥me (simulation)">
                    <div class="checkbox-m3" id="edit-ghost-checkbox">
                        <span class="material-symbols-rounded filled" aria-hidden="true">check</span>
                    </div>
                    <span class="ghost-toggle-label">Note fant√¥me (simulation)</span>
                </div>
            </div>
            <footer class="dialog-actions">
                <button class="dialog-btn dialog-btn-secondary" id="close-edit-dialog">Annuler</button>
                <button class="dialog-btn dialog-btn-primary" id="save-edit-dialog">Enregistrer</button>
            </footer>
        </div>
    </div>

	<div class="dialog-overlay" id="release-notes-dialog" role="dialog" aria-labelledby="release-notes-title" aria-modal="true">
        <div class="dialog">
            <h2 class="dialog-title" id="release-notes-title">Notes de version (v1.1)</h2>
            <section class="dialog-content" style="max-height: 300px; overflow-y: auto; text-align: left;">
                <p><strong>Nouveaut√©s :</strong></p>
                <ul style="padding-left: 20px; margin-top: 8px;">
                    <li>üë§ Connexion EcoleDirecte : Vous pouvez enfin vous connecter √† EcoleDirecte !</li>
					<li>üìà Le graphique zoome pour ne laisser aucun espace
					<li>üõ†Ô∏è Divers autres fixs</li>
                </ul>
				<p>Si vous trouvez un bug, n'h√©sitez pas √† nous le signaler en personne, sur le <a href="https://github.evomoyenne.qzz.io">Github</a> ou sur <a href="mailto:contact@evomoyenne.qzz.io">contact@evomoyenne.qzz.io</a> !</p>
            </section>
            <footer class="dialog-actions">
                <button class="dialog-btn dialog-btn-primary" id="close-release-notes">G√©nial !</button>
            </footer>
        </div>
    </div>

    <div class="snackbar" id="snackbar"></div>

	<script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('SW enregistr√© !', reg))
            .catch(err => console.log('Erreur SW...', err));
        });
      }
    </script>
	
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="assets/js/idb.js"></script>
	<script src="assets/js/app.js"></script>
</body>
</html>
